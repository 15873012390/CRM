<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zktr.crmproject.dao.mybatis.HTIComplaintDao">

    <resultMap id="complaintMap" type="com.zktr.crmproject.pojos.Complaint">
        <id column="com_id" property="comId"></id>
        <result column="title" property="title"></result>
        <result column="reception_person" property="receptionPerson"></result>
        <result column="classify" property="classify"></result>
        <result column="describes" property="describes"></result>
        <result column="com_date" property="comDate"></result>
        <result column="complainant" property="complainant"></result>
        <result column="emergency_level" property="emergencyLevel"></result>
        <result column="treatment_process" property="treatmentProcess"></result>
        <result column="deal_result" property="dealResult"></result>
        <result column="spent_time" property="spentTime"></result>
        <result column="cus_feedback" property="cusFeedback"></result>
        <result column="return_confirmation" property="returnConfirmation"></result>
        <result column="remarks" property="remarks"></result>
        <association property="customer" javaType="com.zktr.crmproject.pojos.Customer">
            <id column="cus_id" property="cusId"></id>
            <result column="cus_name" property="cusName"></result>
        </association>
    </resultMap>

    <select id="queryAllByPage" resultMap="complaintMap">
        select * from complaint left join customer on complaint.cus_id = customer.cus_id order by complaint.com_id desc
    </select>

    <select id="queryById" resultMap="complaintMap">
    select * from complaint left join customer on complaint.cus_id = customer.cus_id where com_id = #{comId} order by complaint.com_id desc
    </select>




</mapper>
