<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zktr.crmproject.dao.mybatis.JrcClientdemandMDao">
    
    <resultMap id="clientdemandMap" type="Clientdemand">
        <id property="cdId" column="cdId"/>
        <result property="cdTheme" column="cd_theme"/>
        <result property="cdPeople" column="cd_people"/>
        <result property="recordTime" column="record_time"/>
        <result property="importance" column="importance"/>
        <result property="cdContent" column="cd_content"/>
        <result property="note" column="note"/>
        <association property="salesopport" javaType="Salesopport">
            <id property="soId" column="so_id"/>
            <result property="soTheme" column="so_theme"/>
        </association>
    </resultMap>

    <select id="queryClientdemandBySoid" resultMap="clientdemandMap">
        select c.cd_id, c.cd_theme, c.cd_people,c.record_time, c.importance, c.cd_content,
        s.so_id,s.so_theme
        from clientdemand c left join salesopport s on c.so_id = s.so_id
        where c.so_id=#{soId}
        order by c.cd_id desc
    </select>
</mapper>